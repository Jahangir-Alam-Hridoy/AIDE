<!DOCTYPE html>
<html>

<head>
    <title>Android IDE</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <!-- Markdown Parser -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Highlight.js -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>


    <style>
        :root {

            --surface: #252526;
            --muted: #9aa4b2;
            --primary: #007acc;
            --accent: #388e3c;
            --warn: #f57c00;
            --panel-border: #333;
            --topbar: #2d2d2d;
            --status-bg: #007acc;
            --radius: 12px;
            --safe-top: env(safe-area-inset-top, 0px);
            --safe-bottom: env(safe-area-inset-bottom, 0px);
        }

        /* reset & base */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        html,
        body {
            height: 100%;
        }

        body {
            font-family: "Roboto", "Noto Sans", system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
            background: var(--bg);
            color: #fff;
            height: 100vh;
            overflow: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            touch-action: manipulation;
        }

        /* Main container */
        .mobile-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100vw;
            position: relative;
        }

        /* Top Action Bar - touch friendly */
        .top-bar {
            background: #282A36;
            padding: calc(8px + var(--safe-top)) 12px 10px 12px;
            display: flex;
            align-items: center;
            gap: 10px;

            min-height: 64px;
            border-bottom: 1px solid #444;
            -webkit-overflow-scrolling: touch;
            position: relative;
            z-index: 20;
        }

        /* hide scrollbar visually but allow scrolling */
        .top-bar::-webkit-scrollbar {
            height: 6px;
        }

        .top-bar::-webkit-scrollbar-thumb {
            background: transparent;
            border-radius: 6px;
        }

        /* progress bar */
        #progress-container {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background-color: rgba(0, 0, 0, 0.05);
            z-index: 150;
            overflow: hidden;
        }

        #progress-bar {
            height: 100%;
            width: 20%;
            background-color: #4cafef;
            position: absolute;
            left: -20%;
            border-radius: 3px;
        }

        /* Action Buttons (larger targets for thumbs) */
        .action-btn {
            padding: 12px 14px;
            background: none;
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 15px;
            touch-action: manipulation;
            flex-shrink: 0;
            min-width: 56px;
            height: 44px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .action-btn.success {
            font-size: 20px;
        }

        .action-btn.secondary {
            font-size: 20px;
            font-weight: bold;
            position: relative;
            right: 0;
        }

        .action-btn.warning {
            background: var(--warn);
        }

        #buildBtn {
            position: absolute;
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50px;
            background: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            float: right;
            right: 0;
            margin-right: 70px;
        }


        /* ‡¶ü‡¶æ‡¶ö/‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
        #buildBtn:active::after {
            content: "";
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.3);
            /* ‡¶ö‡¶æ‡¶™ ‡¶¶‡¶ø‡¶≤‡ßá ‡¶ó‡¶æ‡ßù ‡¶π‡¶¨‡ßá */
            animation: fadeTouch 0.3s ease;
            pointer-events: none;
            border-radius: inherit;
        }

        @keyframes fadeTouch {
            0% {
                opacity: 0;
            }

            30% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        #buildBtn::before {
            content: "";
            display: block;
            width: 0;
            height: 0;
            border-left: 12px solid #2ecc71;
            /* ‡¶™‡ßç‡¶≤‡ßá ‡¶Ü‡¶á‡¶ï‡¶®‡ßá‡¶∞ ‡¶∏‡¶æ‡¶¶‡¶æ ‡¶§‡ßç‡¶∞‡¶ø‡¶≠‡ßÅ‡¶ú */
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            margin-left: 3px;
        }


        /* Editor area */
        .editor-fullscreen {
            flex: 1;
            position: relative;
            min-height: 0;
            width: 100%;
        }

        #editor {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #1e1e1e;
        }

        /* File manager (slide-in drawer) */
        /* File tree root UL */
        .file-list ul {
            list-style: none;
            /* remove bullets */
            padding-left: 10px;
            /* base indentation */
            margin: 0;
        }

        /* Nested UL */
        .file-list ul ul {
            padding-left: 15px;
            /* nested indentation */
            display: none;
            /* hide child by default */
        }

        /* Folder styling */
        .folder {
            font-weight: bold;
            color: #00bfff;
            /* blue-ish for folders */
            cursor: pointer;
            user-select: none;
        }

        /* Folder hover */
        .folder:hover {
            color: #1e90ff;
        }

        /* File styling */
        .file {
            color: #ffffff;
            /* normal file color */
            cursor: pointer;
            user-select: none;
        }

        /* File hover */
        .file:hover {
            color: #00ff99;
        }

        /* Optional icons using pseudo-elements */
        .folder::before {
            content: "üìÅ ";
        }

        .file::before {
            content: "üìÑ ";
        }

        /* Add small spacing between items */
        .file-list li {
            margin: 3px 0;
        }




        .file-manager {
            position: fixed;
            left: -110%;
            top: 0;
            width: 80%;
            max-width: 420px;
            height: 100%;
            background: #282A36;
            z-index: 140;
            transition: left .28s cubic-bezier(.22, .9, .36, 1);
            overflow-y: auto;
            box-shadow: 2px 0 24px rgba(0, 0, 0, 0.6);
        }

        .file-manager.open {
            left: 0;
        }

        @media (max-width: 380px) {
            .file-manager {
                width: 100%;
                max-width: 100%;
            }
        }

        .file-manager-header {
            padding: calc(6px + var(--safe-top)) 8px 6px 8px;
            background: #282A36;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #282A36;
            position: sticky;
            top: 0;
            z-index: 2;
            min-height: 59px;
            box-sizing: border-box;
        }

        .manue-container {
            width: 40px;
            height: 40px;
            border-radius: 50px;
            background: none;
            display: flex;
            justify-content: center;
            position: absolute;
            margin-right: 4px;
            margin-top: 6px;
            right: 0;
            z-index: 140;
        }

        .three-dot {
            font-size: 28px;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            position: relative;
        }

        /* ‡¶ü‡¶æ‡¶ö ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® */
        .manue-container:active::after {
            content: "";
            position: absolute;
            inset: 0;
            background: rgba(0, 0, 0, 0.3);
            animation: threeDot 0.3s ease;
            pointer-events: none;
            border-radius: inherit;
        }

        @keyframes threeDot {
            0% {
                opacity: 0;
            }

            30% {
                opacity: 1;
            }

            100% {
                opacity: 0;
            }
        }

        /* ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ */
        .item-container {
            width: 180px;
            background: #201f25;
            color: white;
            padding: 10px;
            position: fixed;
            margin-right: 150px;
            margin-top: 5px;
            border-radius: 6px;
            z-index: 999;
            /* ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡ßá ‡¶π‡¶æ‡¶á‡¶° */
            opacity: 0;
            transform: scale(0.95);
            pointer-events: none;
            transition: opacity 0.25s ease, transform 0.25s ease;
        }

        /* ‡¶Ø‡¶ñ‡¶® active ‡¶π‡¶¨‡ßá */
        .item-container.show {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }


        .item-container button {
            width: 100%;
            /* ‡¶™‡ßÅ‡¶∞‡ßã container ‡¶ú‡ßÅ‡ßú‡ßá */
            padding: 10px 14px;
            /* ‡¶≠‡¶ø‡¶§‡¶∞‡ßá‡¶∞ ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ */
            font-size: 15px;
            /* ‡¶≤‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶á‡¶ú */
            text-align: left;
            /* ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶¨‡¶æ‡¶Å‡¶¶‡¶ø‡¶ï‡ßá */
            background: transparent;
            /* ‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü‡ßá transparent */
            border: none;
            /* ‡¶¨‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶¨‡¶æ‡¶¶ */
            border-radius: 4px;
            /* ‡¶π‡¶æ‡¶≤‡¶ï‡¶æ ‡¶ï‡ßã‡¶£ ‡¶ó‡ßã‡¶≤ */
            color: #222;
            /* ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞ */
            color: white;
            transition: background 0.2s ease, color 0.2s ease;
        }

        /* Hover ‡¶è */
        .item-container button:hover {
            background: #f0f0f0;
            color: #000;
        }

        /* Active ‡¶ö‡¶æ‡¶™‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßü */
        .item-container button:active {
            background: #e0e0e0;
        }

        /* ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶è‡¶¨‡¶Ç ‡¶∂‡ßá‡¶∑ ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶≠‡¶ø‡¶®‡ßç‡¶® ‡¶ï‡ßã‡¶£ */
        .item-container button:first-child {
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
        }

        .item-container button:last-child {
            border-bottom-left-radius: 6px;
            border-bottom-right-radius: 6px;
        }


        .file-list {
            padding: 8px 0;
        }

        .file-item {
            padding: 14px 16px;
            border-bottom: 1px solid var(--panel-border);
            cursor: pointer;
            word-break: break-all;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: background .12s;
        }

        .file-item:active {
            background: #333;
        }

        .file-icon {
            font-size: 18px;
            width: 28px;
            text-align: center;
        }


        /* Status bar */
        .status-bar {
            padding: 10px 14px;
            background: var(--status-bg);
            font-size: 13px;
            flex-shrink: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            padding-bottom: calc(10px + var(--safe-bottom));
        }

        .status-info {
            display: flex;
            gap: 12px;
            align-items: center;
        }


        /* Terminal panel */
        .terminal-panel {
            position: fixed;
            bottom: -82.2%;
            left: 0;
            width: 100%;
            height: 90.8%;
            background: #1e1e1e;
            z-index: 130;
            transition: bottom 0s ease;


        }

        .terminal-header {
            width: 100%;
            background: #282A36;
            display: flex;
            flex-direction: column;
            /* ‡¶â‡¶≤‡ßç‡¶≤‡¶Æ‡ßç‡¶¨‡¶≠‡¶æ‡¶¨‡ßá ‡¶∏‡¶æ‡¶ú‡¶æ‡¶®‡ßã */
            justify-content: center;
            /* ‡¶≠‡¶∞‡ßç‡¶§‡¶ø‡¶ï‡¶æ‡¶≤ ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞ */
            align-items: center;
            /* ‡¶Ö‡¶®‡ßÅ‡¶≠‡ßÇ‡¶Æ‡¶ø‡¶ï ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞ */
            border-top: 1px solid #7e7e7e;
            border-bottom: 0.5px solid #5e5e5e;
            padding: 8px 12px;
            /* ‡¶≠‡ßá‡¶§‡¶∞‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç  ‡¶Ü‡¶∞ ‡¶≤‡ßá‡¶ñ‡¶æ‡¶∞ ‡¶Æ‡¶æ‡¶ù‡ßá ‡¶ï‡¶Æ ‡¶´‡¶æ‡¶Å‡¶ï‡¶æ */
        }

        .terminal-header h3 {
            margin: 0;
            font-size: 16px;
            font-weight: 600;
            font-family: "Segoe UI", Roboto, Arial, sans-serif;
            color: #ffffff;
            letter-spacing: 0.4px;
            line-height: 1.2;
        }

        .terminal-header p {
            margin: 0;
            font-size: 12px;
            font-weight: 400;
            font-family: "Segoe UI", Roboto, Arial, sans-serif;
            color: #bbbbbb;
            line-height: 1.2;
        }


        .terminal-content {
            height: 100%; 
            padding: 15px;
            padding-bottom: 100px;
            white-space: pre;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #FFFFFF;
            background: #1b1a1f;
        }

        @media (max-width: 480px) {
            .top-bar {
                gap: 8px;
                padding: calc(6px + var(--safe-top)) 10px 8px 10px;
                min-height: 56px;
            }

            .action-btn {
                padding: 10px 12px;
                height: 44px;
                font-size: 14px;
                min-width: 48px;
            }

        }

        .overlay {
            position: fixed;
            /* ‡¶™‡ßÅ‡¶∞‡ßã ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶¢‡ßá‡¶ï‡ßá ‡¶∞‡¶æ‡¶ñ‡¶¨‡ßá */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.12);
            /* ‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡ßç‡¶∏‡¶™‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶ü ‡¶∂‡ßç‡¶Ø‡¶æ‡¶°‡ßã */
            display: none;
            /* ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã ‡¶•‡¶æ‡¶ï‡¶¨‡ßá */
            z-index: 135;
        }


        /* ===== Stylish Inline Dialog ===== */
        .inline-dialog {
            position: absolute;
            background: linear-gradient(145deg, #2c2c2c, #1f1f1f);
            color: #fff;
            padding: 12px 16px;
            border-radius: 12px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.8);
            font-size: 14px;
            z-index: 1000;
            max-width: 320px;
            word-break: break-word;
            border-left: 4px solid #ffcc00;
        }

        .inline-dialog code {
            background: #333;
            padding: 2px 4px;
            border-radius: 4px;
            font-family: monospace;
        }

        .inline-dialog .buttons {
            margin-top: 10px;
            text-align: right;
        }

        .inline-dialog button {
            margin-left: 6px;
            padding: 4px 10px;
            font-size: 13px;
            font-weight: 500;
            border-radius: 6px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .inline-dialog button.ok-btn {
            background-color: #4caf50;
            color: #fff;
        }

        .inline-dialog button.ok-btn:hover {
            background-color: #45a049;
        }

        .inline-dialog button.cancel-btn {
            background-color: #f44336;
            color: #fff;
        }

        .inline-dialog button.cancel-btn:hover {
            background-color: #e53935;
        }

        .inline-dialog::after {
            content: "";
            position: absolute;
            width: 0;
            height: 0;
            border: 8px solid transparent;
            border-bottom-color: #1f1f1f;
            top: -16px;
            left: 20px;
        }

        /*zoom in zoom out control*/
        /* Floating zoom container */
        .zoom-float-container {
            position: fixed;
            bottom: 80px;
            right: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 135;
        }

        /* Main toggle button */
        .zoom-main-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 2;
        }

        .zoom-main-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 30px rgba(102, 126, 234, 0.6);
        }

        .zoom-main-btn svg {
            transition: transform 0.3s ease;
        }

        .zoom-main-btn.active svg {
            transform: rotate(45deg);
        }

        /* Zoom In / Out buttons */
        .zoom-buttons {
            display: flex;
            flex-direction: column;
            margin-bottom: 15px;
            opacity: 0;
            transform: translateY(20px) scale(0.8);
            pointer-events: none;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .zoom-buttons.show {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: auto;
        }

        .zoom-btn {
            margin: 8px 0;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: #fff;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(79, 172, 254, 0.4);
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .zoom-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.6);
        }

        .zoom-btn:active {
            transform: translateY(0);
        }

        .zoom-btn.minus {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            box-shadow: 0 6px 20px rgba(255, 154, 158, 0.4);
        }

        .zoom-btn.minus:hover {
            box-shadow: 0 8px 25px rgba(255, 154, 158, 0.6);
        }

        .zoom-btn.reset {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            box-shadow: 0 6px 20px rgba(168, 237, 234, 0.4);
        }

        .zoom-btn.reset:hover {
            box-shadow: 0 8px 25px rgba(168, 237, 234, 0.6);
        }

        /* Animation for button appearance */
        .zoom-buttons.show .zoom-btn {
            animation: slideIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        .zoom-buttons.show .zoom-btn:nth-child(1) {
            animation-delay: 0.05s;
        }

        .zoom-buttons.show .zoom-btn:nth-child(2) {
            animation-delay: 0.1s;
        }

        .zoom-buttons.show .zoom-btn:nth-child(3) {
            animation-delay: 0.15s;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.8);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* Pulse animation for main button when active */
        @keyframes pulse {
            0% {
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            }

            50% {
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.8);
            }

            100% {
                box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            }
        }

        .zoom-main-btn.pulse {
            animation: pulse 2s infinite;
        }


        /* AI Panel Overlay */
        #ai-panel {
            position: fixed;
            top: 0;
            right: 0;
            width: 40%;
            min-width: 400px;
            height: 100%;
            background: #252526;
            border-left: 2px solid #007acc;
            display: none;
            border-radius: 10px;
            flex-direction: column;
            z-index: 9999;
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.5);
        }

        #ai-panel button {
            padding: 10px 16px;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            cursor: pointer;
            background: #007acc;
            color: white;
            transition: all 0.2s;
            flex-shrink: 0;
            font-weight: 600;
        }

        #ai-panel button:hover {
            background: #0099ff;
            transform: translateY(-1px);
        }

        #ai-panel button:disabled {
            background: #555;
            cursor: not-allowed;
            opacity: 0.6;
            transform: none;
        }

        #ai-panel.open {
            display: block;
        }

        #ai-panel .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #2d2d2d;
            border-bottom: 1px solid #007acc;
        }

        #ai-panel .panel-title {
            font-size: 18px;
            font-weight: bold;
            color: #00aaff;
        }

        #ai-panel .panel-controls {
            display: flex;
            gap: 10px;
        }

        #ai-panel .panel-content {
            display: flex;
            flex-direction: column;
            height: 100%;
            padding: 0;
        }

        #ai-panel .input-area {
            display: flex;
            gap: 10px;
            padding: 15px;
            border-bottom: 1px solid #444;
            background: #2d2d2d;
        }

        #aiPrompt {
            flex: 1;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #444;
            background: #1e1e1e;
            color: white;
            font-size: 14px;
            resize: none;
            height: 60px;
            font-family: inherit;
        }

        #aiPrompt:focus {
            outline: none;
            border-color: #007acc;
        }

        #aiOutput {
            flex: 1;
            padding: 15px;
            padding-bottom: 70px;
            overflow-y: auto;
            background: #1e1e1e;
            color: white;
            line-height: 1.6;
        }

        #aiOutput pre {
            position: relative;
            background: #1a1a1a;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            margin: 15px 0;
            border-left: 3px solid #007acc;
        }

        #aiOutput code {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
        }

        #aiOutput p {
            margin-bottom: 10px;
        }

        #aiOutput ul,
        #aiOutput ol {
            margin: 10px 0 10px 20px;
        }

        #aiOutput li {
            margin-bottom: 5px;
        }

        .copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #007acc;
            border: none;
            color: white;
            padding: 6px 12px;
            font-size: 12px;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.2s;
            z-index: 10;
        }

        .copy-btn:hover {
            background: #0099ff;
        }

        .thinking {
            color: #ffa500;
            font-style: italic;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .thinking::before {
            content: "‚è≥";
            font-size: 18px;
        }

        .error {
            color: #ff6b6b;
            background: rgba(255, 107, 107, 0.1);
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 3px solid #ff6b6b;
        }

        .success {
            color: #51cf66;
            background: rgba(81, 207, 102, 0.1);
            padding: 12px;
            border-radius: 6px;
            margin: 10px 0;
            border-left: 3px solid #51cf66;
        }

        #ai-toggle {
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #ai-toggle::before {
            content: "ü§ñ";
        }

        #ai-panel #aiClose {
            background: #dc3545;
        }

        #ai-panel #aiClose:hover {
            background: #c82333;
        }



        @media (max-width: 768px) {

            #ai-panel {
                position: relative;
                width: 100%;
                min-width: auto;
                height: 100vh;
                border-left: none;
                border-top: 2px solid #007acc;
            }

            #ai-panel .input-area {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <!-- Floating zoom container -->
    <div class="zoom-float-container">
        <div class="zoom-buttons" id="zoomBtns">
            <button id="zoomInBtn" class="zoom-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <button id="zoomResetBtn" class="zoom-btn reset">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M14.8284 14.8284L19 19M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
            <button id="zoomOutBtn" class="zoom-btn minus">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </button>
        </div>
        <div class="zoom-main-btn" id="zoomMainBtn">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                    d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
        </div>
    </div>




    <div class="manue-container">
        <button class="three-dot">‚ãÆ
        </button>
        <div class="item-container">
            <button id="fileSaveBtn" onclick="saveFile()">üíæ Save</button>
            <button>üîÑ Sync project</button>
            <button id="ai-toggle">AI Agent</button>
            <button onclick="clearTerminal()">Clear terminal</button>

        </div>
    </div>
    <!-- Overlay for modals -->
    <div class="overlay" id="overlay" onclick="closeAllModals()"></div>

    <!-- AI Agent Panel -->
    <div id="ai-panel">
        <div class="panel-header">
            <div class="panel-title">AI Assistant</div>
            <div class="panel-controls">
                <button id="aiCheck">Analyze Code</button>
                <button id="aiClose">Close</button>
            </div>
        </div>
        <div class="panel-content">
            <div class="input-area">
                <textarea id="aiPrompt" placeholder="Ask the AI assistant about your code..."></textarea>
                <button id="aiSend">Send</button>
            </div>
            <div id="aiOutput">üí° AI responses will appear here. Ask about your code or request improvements.</div>
        </div>
    </div>


    <!-- Slide-in File Manager -->
    <div class="file-manager" id="file-manager">
        <div class="file-manager-header">
            <div id="fileManagerTitle" class="file-manager-title"></div>
            <button class="action-btn secondary" onclick="closeFileManager()">‚úï</button>

        </div>
        <div class="file-list" id="file-list">
            <div style="padding: 20px; color: #aaa; text-align: center;">
                <div>üìÇ</div>
                <div style="margin-top: 10px;">Loading files...</div>
            </div>
        </div>
    </div>

    <!-- Terminal Panel -->
    <div class="terminal-panel" id="terminal-panel">
        <div id="terminal-header" class="terminal-header">
            <h3 id="terminal-header-title">
                Build output
            </h3></br>
            <p>Swipe up for build output</p>
        </div>
        <div class="terminal-content" id="terminal-content">
            Run the Application to see it's build output hare.
        </div>
    </div>

    <!-- Main Mobile Container -->
    <div class="mobile-container">
        <!-- Top Action Bar -->
        <div class="top-bar">
            <button class="action-btn secondary" onclick="toggleFileManager()">‚ò∞</button>
            <button class="action-btn" id="buildBtn" aria-level="Run"></button>

            <div id="progress-container">
                <div id="progress-bar"></div>
            </div>
        </div>

        <!-- Full Screen Editor -->
        <div class="editor-fullscreen">
            <div id="editor"></div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <div id="status-message">Ready - Open a file to start editing</div>
            <div class="status-info">
                <span id="line-info">Line: 1</span>
                <span id="language-info">Text</span>
            </div>
        </div>
    </div>


    <!-- Monaco Editor with Fixed CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs/loader.min.js"></script>
    <script>
        class InlineImportSuggester {
    constructor(options) {
        this.editor = options.editor;
        this.importMap = options.importMap;
        this.dialog = null;
        this.subscribers = [];
        this.bindEvents();
    }

    bindEvents() {
        this.editor.onDidChangeModelContent(() => {
            this.checkForMissingImports();
        });
    }

    checkForMissingImports() {
        const code = this.editor.getValue();
        for (const [symbol, importStmt] of Object.entries(this.importMap)) {
            const regex = new RegExp(`\\b${symbol}\\b`);
            if (regex.test(code) && !code.includes(importStmt)) {
                this.showDialog(symbol, importStmt);
                this.notifySubscribers(symbol, importStmt);
                break;
            }
        }
    }

    getCursorCoordinates() {
        const position = this.editor.getPosition();
        const top = this.editor.getTopForLineNumber(position.lineNumber);
        const left = this.editor.getOffsetForColumn(position.lineNumber, position.column);
        const editorDom = this.editor.getDomNode().getBoundingClientRect();
        return { top: editorDom.top + top, left: editorDom.left + left };
    }

    showDialog(symbol, importStmt) {
        if (this.dialog) this.dialog.remove();

        const coords = this.getCursorCoordinates();
        this.dialog = document.createElement("div");
        this.dialog.className = "inline-dialog";
        this.dialog.innerHTML = `
            ‚ö†Ô∏è Missing import:<br><code>${importStmt}</code>
            <div class="buttons">
                <button class="ok-btn">‚úÖ OK</button>
                <button class="cancel-btn">‚ùå Cancel</button>
            </div>
        `;
        document.body.appendChild(this.dialog);
        this.positionDialog(coords);

        this.dialog.querySelector(".ok-btn").onclick = () => {
            this.applyImport(importStmt);
            this.dialog.remove();
            this.dialog = null;
        };
        this.dialog.querySelector(".cancel-btn").onclick = () => {
            this.dialog.remove();
            this.dialog = null;
        };
    }

    positionDialog(coords) {
        if (!this.dialog) return;
        const padding = 8;
        const dialogRect = this.dialog.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;

        let top = coords.top + 20;
        let left = coords.left;

        if (left + dialogRect.width + padding > viewportWidth) {
            left = viewportWidth - dialogRect.width - padding;
        }
        if (top + dialogRect.height + padding > viewportHeight) {
            top = coords.top - dialogRect.height - padding;
        }

        this.dialog.style.top = top + "px";
        this.dialog.style.left = left + "px";
    }

    applyImport(importStmt) {
        let lines = this.editor.getValue().split("\n");
        const pkgIndex = lines.findIndex(line => line.trim().startsWith("package"));
        const packageLine = lines[pkgIndex];
        let afterPackageIndex = pkgIndex + 1;
        while (afterPackageIndex < lines.length && lines[afterPackageIndex].trim() === "") afterPackageIndex++;

        let importLines = [];
        let restLines = [];
        let importEnded = false;
        for (let i = afterPackageIndex; i < lines.length; i++) {
            const line = lines[i];
            if (line.trim().startsWith("import") && !importEnded) importLines.push(line);
            else { importEnded = true; restLines.push(line); }
        }

        if (!importLines.includes(importStmt)) importLines.push(importStmt);
        importLines = [...new Set(importLines)].sort();

        while (restLines.length && restLines[0].trim() === "") restLines.shift();

        const finalCode = [
            packageLine,
            "",
            ...importLines,
            "",
            ...restLines
        ];

        this.editor.setValue(finalCode.join("\n"));
    }

    subscribe(callback) {
        if (typeof callback === "function") this.subscribers.push(callback);
    }

    notifySubscribers(symbol, importStmt) {
        this.subscribers.forEach(cb => cb(symbol, importStmt));
    }
}
    </script>

    <script type="module">
/*
        let progressBar = document.getElementById("progress-bar");
    let animationId;
    let pos = -20;
    let width = 20;
    let growing = true;
    
    // ‡¶∏‡ßç‡¶™‡¶ø‡¶° ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® (‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞/‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßÇ‡¶™)
    let speedPattern = [10, 15, 10, 16];
    let currentSpeedIndex = 0;
    
    function animate() {
        // ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
        if (growing) {
            width += 0.3 + Math.random() * 0.2;
            if (width >= 60) growing = false;
        } else {
            width -= 0.3 + Math.random() * 0.2;
            if (width <= 20) growing = true;
        }
        
        // ‡¶≤‡ßÅ‡¶™ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶∏‡ßç‡¶™‡¶ø‡¶°
        let speed = speedPattern[currentSpeedIndex];
        pos += speed / 5; // ‡¶∏‡ßç‡¶ï‡ßá‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá px/frame
        
        if (pos > 100) {
            pos = -width;
            // ‡¶™‡¶∞‡ßá‡¶∞ ‡¶≤‡ßÅ‡¶™‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
            currentSpeedIndex = (currentSpeedIndex + 1) % speedPattern.length;
        }
        
        progressBar.style.width = width + "%";
        progressBar.style.left = pos + "%";
        
        animationId = requestAnimationFrame(animate);
    }
    
    function startLoading() {
        document.getElementById("progress-container").style.display = "block";
        if (!animationId) animate();
    }
    
    function stopLoading() {
        document.getElementById("progress-container").style.display = "none";
        if (animationId) {
            cancelAnimationFrame(animationId);
            animationId = null;
            pos = -20;
            width = 20;
            growing = true;
            currentSpeedIndex = 0;
            progressBar.style.width = width + "%";
            progressBar.style.left = pos + "%";
        }
    }
    
    // ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶§‡ßá ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã ‡¶•‡¶æ‡¶ï‡¶¨‡ßá
    stopLoading();

*/




const threeDotBtn = document.querySelector(".manue-container");
const itemContainer = document.querySelector(".item-container");

threeDotBtn.addEventListener("click", (e) => {
    e.stopPropagation(); // ‡¶¨‡¶æ‡¶ü‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá event ‡¶â‡¶™‡¶∞‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá ‡¶®‡¶æ
    itemContainer.classList.toggle("show");
    document.getElementById("overlay").style.display = 'block';
});

// ‡¶¨‡¶æ‡¶á‡¶∞‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡¶≤‡ßá ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶π‡¶æ‡¶á‡¶° ‡¶π‡¶¨‡ßá
document.addEventListener("click", (e) => {
    if (!itemContainer.contains(e.target) && !threeDotBtn.contains(e.target)) {
        itemContainer.classList.remove("show");
    }
});


// Gemini api key

    import { GoogleGenerativeAI } from 'https://esm.run/@google/generative-ai';
    
    // Initialize API
    const API_KEY = "";
    const genAI = new GoogleGenerativeAI(API_KEY);
    const model = genAI.getGenerativeModel({
      model: "gemini-2.0-flash", // Using a more reliable model
      generationConfig: {
        temperature: 0.7, 
        maxOutputTokens: 2000,
        topP: 0.8,
        topK: 40
      }
    });

    // Configure Markdown parser
    marked.setOptions({
      highlight: function(code, lang) {
        if (lang && hljs.getLanguage(lang)) {
          try {
            return hljs.highlight(code, { language: lang }).value;
          } catch (err) {
            console.warn('Highlight error:', err);
          }
        }
        return hljs.highlightAuto(code).value;
      },
      breaks: true,
      gfm: true
    });

    // Monaco Editor Configuration
    require.config({
        paths: { 
            'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.33.0/min/vs' 
        }
    });

    //let editor;
    
    let currentStream = null;
    let accumulatedText = '';

    // Initialize Editor
    window.addEventListener('load', function() {
        require(['vs/editor/editor.main'], function() {
          let initialContent=`// Welcome to Android IDE with AI Assistant
// Open the left drawer for file tree
// Swipe up for build output
// Use the menu (‚ãÆ) for AI Assistant`;

            editor = monaco.editor.create(document.getElementById('editor'), {
                value: initialContent,
                language: 'kotlin',
                theme: 'vs-dark',
                automaticLayout: true,
                scrollBeyondLastLine: false,
                wordWrap: 'off', // ‚úÖ Mobile-friendly word wrap
                minimap: { enabled: false },
                folding: true,
                lineNumbers: 'on',
                fontSize: 11,
                lineHeight: 1.6,
                mouseWheelZoom: true,
                scrollbar: {
                    verticalScrollbarSize: 6,
                    horizontalScrollbarSize: 6
                },
                padding: { top: 10, bottom: 10 }
            });
            
              //import suggester 

const importMap = {
  "Column": "import androidx.compose.foundation.layout.Column",
    "Row": "import androidx.compose.foundation.layout.Row",
    "Box": "import androidx.compose.foundation.layout.Box",
    "Spacer": "import androidx.compose.foundation.layout.Spacer",
    "fillMaxSize": "import androidx.compose.foundation.layout.fillMaxSize",
    "fillMaxWidth": "import androidx.compose.foundation.layout.fillMaxWidth",
    "fillMaxHeight": "import androidx.compose.foundation.layout.fillMaxHeight",
    "wrapContentSize": "import androidx.compose.foundation.layout.wrapContentSize",
    "padding": "import androidx.compose.foundation.layout.padding",
    "size": "import androidx.compose.foundation.layout.size",
    "width": "import androidx.compose.foundation.layout.width",
    "height": "import androidx.compose.foundation.layout.height",
    "background": "import androidx.compose.foundation.background",
    "weight": "import androidx.compose.foundation.layout.weight",
    "AspectRatio": "import androidx.compose.foundation.layout.aspectRatio",
    "FlowRow": "import androidx.compose.foundation.layout.FlowRow",
    "FlowColumn": "import androidx.compose.foundation.layout.FlowColumn",

    // ===============================
    // Foundation (basic widgets)
    // ===============================
    "Image": "import androidx.compose.foundation.Image",
    "BasicText": "import androidx.compose.foundation.text.BasicText",
    "BasicTextField": "import androidx.compose.foundation.text.BasicTextField",
    "ClickableText": "import androidx.compose.foundation.text.ClickableText",
    "LazyColumn": "import androidx.compose.foundation.lazy.LazyColumn",
    "LazyRow": "import androidx.compose.foundation.lazy.LazyRow",
    "items": "import androidx.compose.foundation.lazy.items",
    "itemsIndexed": "import androidx.compose.foundation.lazy.itemsIndexed",
    "rememberLazyListState": "import androidx.compose.foundation.lazy.rememberLazyListState",
    "verticalScroll": "import androidx.compose.foundation.verticalScroll",
    "horizontalScroll": "import androidx.compose.foundation.horizontalScroll",
    "rememberScrollState": "import androidx.compose.foundation.rememberScrollState",
    "BorderStroke": "import androidx.compose.foundation.BorderStroke",

    // ===============================
    // Material3
    // ===============================
    "Button": "import androidx.compose.material3.Button",
    "Text": "import androidx.compose.material3.Text",
    "Surface": "import androidx.compose.material3.Surface",
    "MaterialTheme": "import androidx.compose.material3.MaterialTheme",
    "OutlinedTextField": "import androidx.compose.material3.OutlinedTextField",
    "TextField": "import androidx.compose.material3.TextField",
    "Scaffold": "import androidx.compose.material3.Scaffold",
    "TopAppBar": "import androidx.compose.material3.TopAppBar",
    "Card": "import androidx.compose.material3.Card",
    "AlertDialog": "import androidx.compose.material3.AlertDialog",
    "Checkbox": "import androidx.compose.material3.Checkbox",
    "Switch": "import androidx.compose.material3.Switch",
    "RadioButton": "import androidx.compose.material3.RadioButton",
    "Slider": "import androidx.compose.material3.Slider",
    "LinearProgressIndicator": "import androidx.compose.material3.LinearProgressIndicator",
    "CircularProgressIndicator": "import androidx.compose.material3.CircularProgressIndicator",
    "FloatingActionButton": "import androidx.compose.material3.FloatingActionButton",
    "Icon": "import androidx.compose.material3.Icon",
    "IconButton": "import androidx.compose.material3.IconButton",
    "DropdownMenu": "import androidx.compose.material3.DropdownMenu",
    "DropdownMenuItem": "import androidx.compose.material3.DropdownMenuItem",
    "SnackbarHost": "import androidx.compose.material3.SnackbarHost",
    "SnackbarHostState": "import androidx.compose.material3.SnackbarHostState",

    // ===============================
    // Runtime
    // ===============================
    "Composable": "import androidx.compose.runtime.Composable",
    "remember": "import androidx.compose.runtime.remember",
    "mutableStateOf": "import androidx.compose.runtime.mutableStateOf",
    "mutableIntStateOf": "import androidx.compose.runtime.mutableIntStateOf",
    "mutableLongStateOf": "import androidx.compose.runtime.mutableLongStateOf",
    "mutableFloatStateOf": "import androidx.compose.runtime.mutableFloatStateOf",
    "LaunchedEffect": "import androidx.compose.runtime.LaunchedEffect",
    "SideEffect": "import androidx.compose.runtime.SideEffect",
    "DisposableEffect": "import androidx.compose.runtime.DisposableEffect",
    "rememberCoroutineScope": "import androidx.compose.runtime.rememberCoroutineScope",
    "getValue": "import androidx.compose.runtime.getValue",
    "setValue": "import androidx.compose.runtime.setValue",
    "rememberSaveable": "import androidx.compose.runtime.saveable.rememberSaveable",
    "produceState": "import androidx.compose.runtime.produceState",
    "derivedStateOf": "import androidx.compose.runtime.derivedStateOf",

    // ===============================
    // UI Core
    // ===============================
    "Modifier": "import androidx.compose.ui.Modifier",
    "Alignment": "import androidx.compose.ui.Alignment",
    "Color": "import androidx.compose.ui.graphics.Color",
    "Brush": "import androidx.compose.ui.graphics.Brush",
    "Shape": "import androidx.compose.ui.graphics.Shape",
    "CircleShape": "import androidx.compose.foundation.shape.CircleShape",
    "RoundedCornerShape": "import androidx.compose.foundation.shape.RoundedCornerShape",
    "sp": "import androidx.compose.ui.unit.sp",
    "dp": "import androidx.compose.ui.unit.dp",
    "IntOffset": "import androidx.compose.ui.unit.IntOffset",
    "IntSize": "import androidx.compose.ui.unit.IntSize",

    // ===============================
    // Animation
    // ===============================
    "animateFloatAsState": "import androidx.compose.animation.core.animateFloatAsState",
    "tween": "import androidx.compose.animation.core.tween",
    "spring": "import androidx.compose.animation.core.spring",
    "keyframes": "import androidx.compose.animation.core.keyframes",
    "InfiniteTransition": "import androidx.compose.animation.core.InfiniteTransition",
    "rememberInfiniteTransition": "import androidx.compose.animation.core.rememberInfiniteTransition",

    // ===============================
    // AndroidX / Activity
    // ===============================
    "Bundle": "import android.os.Bundle",
    "ComponentActivity": "import androidx.activity.ComponentActivity",
    "setContent": "import androidx.activity.compose.setContent",
    "Context": "import android.content.Context",
    "Intent": "import android.content.Intent",

    // ===============================
    // Tools
    // ===============================
    "Preview": "import androidx.compose.ui.tooling.preview.Preview",
};

// Attach Inline Import Suggester
const suggester = new InlineImportSuggester({ editor: editor, importMap: importMap });

// Optional: subscribe for logs or further UI update
suggester.subscribe((symbol, importStmt) => {
    console.log("Missing import detected:", symbol, importStmt);
});


 let currentFontSize = 14; // Default font size
const zoomMainBtn = document.getElementById('zoomMainBtn');
const zoomBtns = document.getElementById('zoomBtns');
const zoomInBtn = document.getElementById('zoomInBtn');
const zoomOutBtn = document.getElementById('zoomOutBtn');
const zoomResetBtn = document.getElementById('zoomResetBtn');

let zoomVisible = false;
//let editor; // This would be your actual editor instance

// Toggle animation with enhanced effects
zoomMainBtn.addEventListener('click', () => {
    zoomVisible = !zoomVisible;
    
    if (zoomVisible) {
        zoomBtns.classList.add('show');
        zoomMainBtn.classList.add('active', 'pulse');
    } else {
        zoomBtns.classList.remove('show');
        zoomMainBtn.classList.remove('active', 'pulse');
    }
});

// Zoom In with smooth animation
zoomInBtn.addEventListener('click', () => {
    currentFontSize = Math.min(30, currentFontSize + 2);
    updateZoom();
    animateButton(zoomInBtn);
});

// Zoom Out with smooth animation
zoomOutBtn.addEventListener('click', () => {
    currentFontSize = Math.max(1, currentFontSize - 2);
    updateZoom();
    animateButton(zoomOutBtn);
});

// Reset zoom level
zoomResetBtn.addEventListener('click', () => {
    currentFontSize = 14;
    updateZoom();
    animateButton(zoomResetBtn);
});

/*
// Update editor font size (replace with your actual editor)
function updateZoom() {
    // This is where you would update your editor
    // For demonstration, we'll update a CSS variable
    document.documentElement.style.setProperty('--font-size', `${currentFontSize}px`);
    
    // If you have an actual editor, use:
    // editor.updateOptions({ fontSize: currentFontSize });
    
    // Show current zoom level as a tooltip
    showZoomLevel();
}
*/
function updateZoom() {
    // ‡¶Ü‡¶∏‡¶≤ editor ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
    editor.updateOptions({ fontSize: currentFontSize });

    // Zoom ‡¶≤‡ßá‡¶≠‡ßá‡¶≤ tooltip ‡¶∂‡ßã ‡¶ï‡¶∞‡¶æ‡¶ì
    showZoomLevel();
}

// Button animation on click
function animateButton(button) {
    button.style.transform = 'scale(0.9)';
    setTimeout(() => {
        button.style.transform = '';
    }, 150);
}

// Show zoom level as a temporary tooltip
function showZoomLevel() {
    // Remove existing tooltip if any
    const existingTooltip = document.querySelector('.zoom-tooltip');
    if (existingTooltip) {
        existingTooltip.remove();
    }
    
    // Create and show new tooltip
    const tooltip = document.createElement('div');
    tooltip.className = 'zoom-tooltip';
    tooltip.textContent = `${currentFontSize}px`;
    tooltip.style.cssText = `
        position: fixed;
        bottom: 90px;
        right: 30px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 14px;
        z-index: 10000;
        transition: opacity 0.3s;
    `;
    
    document.body.appendChild(tooltip);
    
    // Fade out and remove tooltip after 1.5 seconds
    setTimeout(() => {
        tooltip.style.opacity = '0';
        setTimeout(() => {
            if (tooltip.parentNode) {
                tooltip.parentNode.removeChild(tooltip);
            }
        }, 300);
    }, 1500);
}

// Close zoom buttons when clicking outside
document.addEventListener('click', (e) => {
    if (zoomVisible &&
        !zoomMainBtn.contains(e.target) &&
        !zoomBtns.contains(e.target)) {
        zoomVisible = false;
        zoomBtns.classList.remove('show');
        zoomMainBtn.classList.remove('active', 'pulse');
    }
});

// Initialize CSS variable for font size
document.documentElement.style.setProperty('--font-size', `${currentFontSize}px`);
      
      

            // Update cursor position in real-time
            editor.onDidChangeCursorPosition(function(e) {
                document.getElementById('line-info').textContent = 
                    `Line: ${e.position.lineNumber}:${e.position.column}`;
            });

            // Handle mobile resize and orientation changes
            window.addEventListener('resize', function() {
                setTimeout(() => {
                    editor.layout();
                }, 100);
            });
        });
    });
    
    //Ai implementation part 
 // DOM Elements
 const aiPanel = document.getElementById('ai-panel');
 const aiToggle = document.getElementById('ai-toggle');
 const aiPrompt = document.getElementById('aiPrompt');
 const aiOutput = document.getElementById('aiOutput');
 const aiSend = document.getElementById('aiSend');
 const aiCheck = document.getElementById('aiCheck');
 const aiClose = document.getElementById('aiClose');
 
 // Event Listeners
 aiToggle.addEventListener('click', toggleAIPanel);
 aiClose.addEventListener('click', closeAIPanel);
 aiSend.addEventListener('click', sendMessage);
 aiCheck.addEventListener('click', analyzeCode);
 
 aiPrompt.addEventListener('keydown', function(e) {
     if (e.key === 'Enter' && (e.ctrlKey || e.metaKey)) {
         e.preventDefault();
         sendMessage();
     }
 });
 
 // Functions
 function toggleAIPanel() {
     aiPanel.classList.toggle('open');
     if (aiPanel.classList.contains('open')) {
         aiPrompt.blur();
     }
 }
 
 function closeAIPanel() {
     aiPanel.classList.remove('open');
     if (currentStream) {
         currentStream.abort();
         currentStream = null;
     }
 }
 
 function addCopyButtons(container) {
     const preElements = container.querySelectorAll('pre');
     preElements.forEach(pre => {
         // Remove existing copy button if present
         const existingBtn = pre.querySelector('.copy-btn');
         if (existingBtn) existingBtn.remove();
         
         const code = pre.querySelector('code');
         if (code) {
             const copyBtn = document.createElement('button');
             copyBtn.innerText = 'Copy';
             copyBtn.classList.add('copy-btn');
             copyBtn.addEventListener('click', function() {
                 const textToCopy = code.textContent || code.innerText;
                 navigator.clipboard.writeText(textToCopy).then(() => {
                     copyBtn.innerText = 'Copied!';
                     setTimeout(() => {
                         copyBtn.innerText = 'Copy';
                     }, 2000);
                 }).catch(err => {
                     console.error('Failed to copy: ', err);
                     copyBtn.innerText = 'Failed';
                     setTimeout(() => {
                         copyBtn.innerText = 'Copy';
                     }, 2000);
                 });
             });
             pre.appendChild(copyBtn);
         }
     });
 }
 
 async function sendMessage() {
     const prompt = aiPrompt.value.trim();
     if (!prompt) {
         aiOutput.innerHTML = '<div class="error">Please enter a message before sending.</div>';
         return;
     }
     
     if (aiSend.innerText === "Cancel") {
         // Cancel current request
         if (currentStream) {
             currentStream.abort();
             currentStream = null;
         }
         aiSend.innerText = "Send";
         aiSend.disabled = false;
         aiCheck.disabled = false;
         return;
     }
     
     // Start new request
     aiSend.innerText = "Cancel";
     aiSend.disabled = false;
     aiCheck.disabled = true;
     accumulatedText = '';
     
     // Add user message to output
     const userMessage = `<div><strong>You:</strong> ${escapeHtml(prompt)}</div>`;
     aiOutput.innerHTML = userMessage + '<div class="thinking">AI is thinking...</div>';
     aiOutput.scrollTop = aiOutput.scrollHeight;
     
     // Clear input
     aiPrompt.value = '';
     
     try {
         // Get current code for context
         const currentCode = editor.getValue();
         
         // Create enhanced prompt with code context
         const enhancedPrompt = `As a Kotlin programming expert, please help with the following request.

User Request: ${prompt}

Current Code:
\`\`\`kotlin
${currentCode}
\`\`\`

Please provide a helpful, detailed response. If suggesting code changes, use Markdown code blocks.`;
         
         const result = await model.generateContentStream(enhancedPrompt);
         currentStream = result;
         
         // Clear thinking message
         aiOutput.innerHTML = userMessage;
         
         for await (const chunk of result.stream) {
             const chunkText = chunk.text();
             if (chunkText) {
                 accumulatedText += chunkText;
                 const renderedHTML = marked.parse(accumulatedText);
                 aiOutput.innerHTML = userMessage + renderedHTML;
                 addCopyButtons(aiOutput);
                 aiOutput.scrollTop = aiOutput.scrollHeight;
             }
         }
         
         // Final rendering
         const finalHTML = marked.parse(accumulatedText);
         aiOutput.innerHTML = userMessage + finalHTML + '<div class="success">Response completed.</div>';
         addCopyButtons(aiOutput);
         
     } catch (error) {
         console.error('AI Error:', error);
         if (error.name !== 'AbortError') {
             aiOutput.innerHTML = userMessage + `<div class="error">Error: ${error.message}</div>`;
         } else {
             aiOutput.innerHTML = userMessage + '<div class="error">Request cancelled.</div>';
         }
     } finally {
         aiSend.innerText = "Send";
         aiSend.disabled = false;
         aiCheck.disabled = false;
         currentStream = null;
     }
 }
 
 function analyzeCode() {
     const code = editor.getValue();
     aiPrompt.value = "Analyze this Kotlin code for errors, improvements, and best practices.";
     sendMessage();
 }
 
 // Utility function to escape HTML
 function escapeHtml(text) {
     const div = document.createElement('div');
     div.textContent = text;
     return div.innerHTML;
 }
 
 // Initialize highlight.js
 hljs.highlightAll();
  
    </script>

    <script>
        let editor;
let currentFile = null;

    // Modal Management Functions
    function closeAllModals() {
        closeFileManager();
        closeTerminal();
    }

    // File Manager Functions
    const overlay = document.getElementById('overlay');
    overlay.addEventListener('click', ()=>{
        overlay.style.display = 'none'
    })
    function toggleFileManager() {
        const fileManager = document.getElementById('file-manager');
        //overlay.style.display = 'block';

        if (overlay.style.display === 'none') {
            console.log('block')
            overlay.style.display = 'block';  // ‡¶Ø‡¶¶‡¶ø ‡¶¨‡ßç‡¶≤‡¶ï ‡¶•‡¶æ‡¶ï‡ßá ‚Üí ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã
        } else {
            console.log('block')
            overlay.style.display = 'block'; // ‡¶Ø‡¶¶‡¶ø ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã ‡¶•‡¶æ‡¶ï‡ßá ‚Üí ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã
        }
        closeTerminal();
        // Close terminal if open
        
        fileManager.classList.toggle('open');
        
        if (fileManager.classList.contains('open')) {
            loadFiles();
        }
    }

    function closeFileManager() {
        document.getElementById('file-manager').classList.remove('open');
        overlay.style.display = 'none';
    }
/*
    // Terminal Functions
    function toggleTerminal() {
        const terminal = document.getElementById('terminal-panel');
        
        closeFileManager(); // Close file manager if open
        
        terminal.classList.toggle('open');
    }
    */

    function closeTerminal() {
        document.getElementById('terminal-panel').classList.remove('open');
    }
/*
    function showTerminalOutput(content) {
        document.getElementById('terminal-content').innerHTML = content;
        //toggleTerminal();
    }
    */
    function showTerminalOutput(content) {
    const terminal = document.getElementById('terminal-panel');

    // ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ terminal ‡¶ñ‡ßã‡¶≤‡¶æ ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá open ‡¶ï‡¶∞
   //  if (!terminal.classList.contains('open')) { 
     //    terminal.classList.add('open'); 
     //}
    // content update ‡¶ï‡¶∞‡ßã
    document.getElementById('terminal-content').innerHTML = content;

    // scroll ‡¶∏‡¶∞‡ßç‡¶¨‡¶¶‡¶æ ‡¶®‡¶ø‡¶ö‡ßá
    document.getElementById('terminal-content').scrollTop =
        document.getElementById('terminal-content').scrollHeight;
}





    function clearTerminal() {
        document.getElementById('terminal-content').innerHTML = 'Terminal cleared - Ready for new output';
    }

    // File Operations
// File Operations - Fixed for nested directories
async function loadFiles() {
    try {
        const fileList = document.getElementById('file-list');
        fileList.innerHTML = '<div style="padding: 20px; color: #aaa; text-align: center;">Loading files...</div>';

        const response = await fetch('/api/files');
        const { files, base } = await response.json();
        document.getElementById('fileManagerTitle').textContent = "üìÇ " + base;

        fileList.innerHTML = ''; // clear previous

        if (!files || Object.keys(files).length === 0) {
            fileList.innerHTML = `
                <div style="padding: 30px; text-align: center; color: #aaa;">
                    <div style="font-size: 48px;">üìÅ</div>
                    <div style="margin-top: 15px;">No files found</div>
                    <div style="font-size: 12px; margin-top: 10px;">Create a project first</div>
                </div>
            `;
            return;
        }

        const ul = document.createElement('ul');
        ul.style.listStyle = 'none';
        ul.style.paddingLeft = '10px';
        fileList.appendChild(ul);

        // Recursive function to build tree
        function buildTree(node, obj) {
            Object.keys(obj).forEach(key => {
                const li = document.createElement('li');
                const span = document.createElement('span');
                span.textContent = key;
                span.dataset.name = key;

                if (obj[key] && typeof obj[key] === 'object') {
                    // folder
                    span.classList.add('folder');
                    span.style.cursor = 'pointer';
                    li.appendChild(span);

                    const childUl = document.createElement('ul');
                    childUl.style.display = 'none';
                    childUl.style.listStyle = 'none';
                    childUl.style.paddingLeft = '15px';
                    li.appendChild(childUl);

                    // ‚úÖ stop propagation so nested folders don't interfere
                    span.addEventListener('click', (e) => {
                        e.stopPropagation();
                        childUl.style.display = childUl.style.display === 'none' ? 'block' : 'none';
                    });

                    buildTree(childUl, obj[key]);
                } else {
                    // file
                    span.classList.add('file');
                    span.style.cursor = 'pointer';

                    // ‚úÖ stop propagation for file clicks
                    span.addEventListener('click', (e) => {
                        e.stopPropagation();
                        loadFile(getFullPath(span));
                        closeFileManager();
                    });

                    li.appendChild(span);
                }

                node.appendChild(li);
            });
        }

        // Correctly get full path for nested files
        function getFullPath(span) {
            const names = [];
            let el = span;
            while (el && el.tagName === 'SPAN') {
                names.unshift(el.dataset.name);
                const parentLi = el.closest('li').parentElement.closest('li');
                el = parentLi ? parentLi.querySelector('span') : null;
            }
            return names.join('/');
        }

        buildTree(ul, files);

    } catch (error) {
        console.error('Error loading files:', error);
        document.getElementById('file-list').innerHTML =
            '<div style="padding: 20px; color: red;">Error loading files. Check server connection.</div>';
    }
} 

    // NEW CODE - ‡¶è‡¶ü‡¶æ ‡¶¨‡¶∏‡¶æ‡¶®
function getFileExtension(file) {
    // First check for multi-part extensions
    if (file.endsWith('.gradle.kts')) return 'gradle.kts';
    if (file.endsWith('.gitignore')) return 'gitignore';
    
    // Then check regular extensions
    const parts = file.split('.');
    if (parts.length > 1) {
        return parts.pop().toLowerCase();
    }
    return ''; // No extension
}

   // NEW CODE - ‡¶è‡¶ü‡¶æ ‡¶¨‡¶∏‡¶æ‡¶®
function getFileIcon(ext) {
    const icons = {
        'kt': 'üÖ∫', 
        'java': 'üìÑ', 
        'xml': 'üìã',
        'gradle': 'üêò', 
        'gradle.kts': 'üêòüÖ∫', // ‚úÖ Added for gradle.kts
        'txt': 'üìù', 
        'md': 'üìñ',
        'json': 'üîß', 
        'yml': '‚öôÔ∏è', 
        'yaml': '‚öôÔ∏è',
        'html': 'üåê', 
        'css': 'üé®', 
        'js': 'üìú',
        'png': 'üñºÔ∏è', 
        'jpg': 'üñºÔ∏è', 
        'jpeg': 'üñºÔ∏è',
        'gitignore': 'üîí',
        'properties': 'üìÑ',
        'db': 'üìÑ',
        'bat': 'üìÑ'
    };
    return icons[ext] || 'üìÅ';
}
    async function loadFile(filename) {
        try {
            updateStatus(`Loading: ${filename}`);
            
            const response = await fetch('/api/files/' + encodeURIComponent(filename));
            const data = await response.json();
            
            if (data.error) throw new Error(data.error);
            
            // Set content first
            editor.setValue(data.content);
            currentFile = filename;
            
            // Then set language with delay for proper syntax highlighting
            setTimeout(() => {
                const ext = filename.split('.').pop();
                const lang = getLanguage(ext, filename);
                
                const model = editor.getModel();
                if (model) {
                    monaco.editor.setModelLanguage(model, lang);
                }
                
                document.getElementById('language-info').textContent = lang;
            }, 50);
            
            updateStatus(`Editing: ${filename}`);
            
        } catch (error) {
            alert('Error loading file: ' + error.message);
            updateStatus('Error loading file');
        }
    }

    // NEW CODE - ‡¶è‡¶ü‡¶æ ‡¶¨‡¶∏‡¶æ‡¶®
function getLanguage(ext, filename) {
    // First check filename for specific patterns
    if (filename && filename.endsWith('.gradle.kts')) return 'kotlin';
    
    // Then check by extension
    const languages = {
        'kt': 'kotlin',
        'java': 'java', 
        'xml': 'xml',
        'gradle': 'groovy',
        'gradle.kts': 'kotlin', // ‚úÖ Added this line
        'txt': 'plaintext',
        'md': 'markdown',
        'json': 'json',
        'yml': 'yaml',
        'yaml': 'yaml',
        'html': 'html',
        'css': 'css',
        'js': 'javascript',
        'properties': 'ini',
        'gitignore': 'plaintext',
        'db': 'database',
        'bat': 'setting'
    };
    return languages[ext.toLowerCase()] || 'plaintext';
}
    async function saveFile() {
        if (!currentFile) {
            alert('Please open a file first');
            return;
        }
        
        try {
            const content = editor.getValue();
            const response = await fetch('/api/save', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ filepath: currentFile, code: content })
            });
            
            const result = await response.json();
            if (result.error) {
                throw new Error(result.error);
            }
            
            updateStatus(`Saved: ${currentFile}`);
            
        } catch (error) {
            alert('Save error: ' + error.message);
        }
    }
    
    
    const buildBtn = document.getElementById('buildBtn');
    const buildHeaderTitle = document.getElementById('terminal-header-title');

buildBtn.addEventListener('click', () => {
    if (!currentFile) {
        alert('Please open a project file first');
        return;
    }
    
    startLoading();
    updateStatus('Building project...');
    buildHeaderTitle.textContent = '‚è≥ Building project';

    // output ‡¶ï‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶§‡ßá‡¶á ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßã
    let output = '<div style="color: #ffffff; font-family: monospace;">';
    //output += '<div style="color: #ffff00;">üì¶ Build Output:</div>';
    output += "<p>Starting build process...</p>";

    // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá‡¶á ‡¶¶‡ßá‡¶ñ‡¶ø‡¶Ø‡¶º‡ßá ‡¶¶‡¶æ‡¶ì
    showTerminalOutput(output);

    const evtSource = new EventSource(`/run_project?path=${encodeURIComponent(currentFile)}`);

   evtSource.onmessage = function(event) {
    if (event.data === "[DONE]") {
        stopLoading();
        evtSource.close();
        updateStatus('Build finished');


        return;
    }

    if (event.data.includes("‚úÖ Build completed")) {
        buildHeaderTitle.textContent = '‚úîÔ∏è Build finished';
        output += '<p class="status-success">‚úÖ Build Successful</p>';
    } else if (event.data.includes("‚ùå Build failed")) {
        stopLoading();
        updateStatus('Build failed');
        buildHeaderTitle.textContent = '‚ùå Build failed';
        output += '<p class="status-error">‚ùå Build Failed</p>';
    } else if (event.data.includes("‚ùå gradlew not found in project root!")){
        alert('gradlew not found!');
    }else {
        output += '<p>' + event.data + '</p>';
    }

    showTerminalOutput(output);
};
    evtSource.onerror = function() {
        output += '<p class="status-error">Connection Error</p>';
        showTerminalOutput(output);
        updateStatus('Build failed');
        buildHeaderTitle.textContent = '‚ùå Building failed';
        stopLoading();
        evtSource.close();
    };

});

        //Progress bar
  let progressBar = document.getElementById("progress-bar");
    let animationId;
    let pos = -20;
    let width = 20;
    let growing = true;
    
    // ‡¶∏‡ßç‡¶™‡¶ø‡¶° ‡¶™‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∞‡ßç‡¶® (‡¶Æ‡¶ø‡¶ü‡¶æ‡¶∞/‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶Ö‡¶®‡ßÅ‡¶∞‡ßÇ‡¶™)
    let speedPattern = [10, 15, 10, 16];
    let currentSpeedIndex = 0;
    
    function animate() {
        // ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶• ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
        if (growing) {
            width += 0.3 + Math.random() * 0.2;
            if (width >= 60) growing = false;
        } else {
            width -= 0.3 + Math.random() * 0.2;
            if (width <= 20) growing = true;
        }
        
        // ‡¶≤‡ßÅ‡¶™ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ ‡¶∏‡ßç‡¶™‡¶ø‡¶°
        let speed = speedPattern[currentSpeedIndex];
        pos += speed / 5; // ‡¶∏‡ßç‡¶ï‡ßá‡¶≤ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá px/frame
        
        if (pos > 100) {
            pos = -width;
            // ‡¶™‡¶∞‡ßá‡¶∞ ‡¶≤‡ßÅ‡¶™‡ßá ‡¶∏‡ßç‡¶™‡¶ø‡¶° ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
            currentSpeedIndex = (currentSpeedIndex + 1) % speedPattern.length;
        }
        
        progressBar.style.width = width + "%";
        progressBar.style.left = pos + "%";
        
        animationId = requestAnimationFrame(animate);
    }
    
    function startLoading() {
        document.getElementById("progress-container").style.display = "block";
        if (!animationId) animate();
    }
    
    function stopLoading() {
        document.getElementById("progress-container").style.display = "none";
        if (animationId) {
            cancelAnimationFrame(animationId);
            animationId = null;
            pos = -20;
            width = 20;
            growing = true;
            currentSpeedIndex = 0;
            progressBar.style.width = width + "%";
            progressBar.style.left = pos + "%";
        }
    }
    
    // ‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶§‡ßá ‡¶≤‡ßÅ‡¶ï‡¶æ‡¶®‡ßã ‡¶•‡¶æ‡¶ï‡¶¨‡ßá
    stopLoading();






    function createNewFile() {
        const filename = prompt('Enter filename (e.g., MainActivity.kt):');
        if (filename) {
            // Basic template based on file extension
            const ext = filename.split('.').pop();
            let template = '';
            
            if (ext === 'kt') {
                template = `class ${filename.replace('.kt', '')} {\n    \n}`;
            } else if (ext === 'java') {
                template = `public class ${filename.replace('.java', '')} {\n    \n}`;
            } else if (ext === 'xml') {
                template = `<?xml version="1.0" encoding="utf-8"?>\n<LinearLayout>\n    \n</LinearLayout>`;
            } else {
                template = `// ${filename}\n\n`;
            }
            
            editor.setValue(template);
            currentFile = filename;
            updateStatus('Created: ' + filename);
        }
    }

    function showProjectInfo() {
        const info = `
Project: ${currentFile || 'No file open'}
Files: ${document.getElementById('file-list').children.length}
Editor: Monaco (VS Code)
Server: Flask + Termux
        `.trim();
        
        alert(info);
    }

    function updateStatus(message) {
        document.getElementById('status-message').textContent = message;
    }

    // Android-specific handlers
    window.addEventListener('popstate', function() {
        closeAllModals();
    });

window.addEventListener('beforeunload', function(e) {
    if (editor.getValue() !== initialContent) {
        e.preventDefault();
        e.returnValue = 'You have unsaved changes. Are you sure you want to leave?';
    }
});

    // Keyboard shortcuts (for devices with physical keyboards)
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey || e.metaKey) {
            switch(e.key) {
                case 's':
                    e.preventDefault();
                    saveFile();
                    break;
                case 'r':
                    e.preventDefault();
                    buildProject();
                    break;
            }
        }
    });

    // Touch gesture for quick access (swipe from left edge)
    let touchStartX = 0;
    document.addEventListener('touchstart', function(e) {
        touchStartX = e.touches[0].clientX;
    });

    document.addEventListener('touchend', function(e) {
        const touchEndX = e.changedTouches[0].clientX;
        const diff = touchEndX - touchStartX;
        
        // Swipe from left edge to open file manager
        if (touchStartX < 50 && diff > 100) {
            toggleFileManager();
        }
    });

    // Initialize status
    updateStatus('Ready - Open file manager to start coding');
    </script>
    <script>
        const terminalPanel = document.getElementById('terminal-panel');
        const terminalHeader = document.getElementById('terminal-header');
        const MAX_TOP_MARGIN = 57.6;
        let isDragging = false;
        let startY;
        let startBottom;

        // ‡¶Æ‡¶æ‡¶â‡¶∏ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü
        terminalHeader.addEventListener('mousedown', (e) => {
            isDragging = true;
            startY = e.clientY;
            startBottom = parseInt(getComputedStyle(terminalPanel).bottom);
            terminalPanel.classList.add('grabbing');
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            let dy = startY - e.clientY;
            let newBottom = startBottom + dy;

            // ‡¶¨‡¶æ‡¶â‡¶®‡ßç‡¶° ‡¶ö‡ßá‡¶ï (‡¶¨‡¶ï‡ßç‡¶∏ ‡¶™‡ßÅ‡¶∞‡ßã ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá‡¶∞ ‡¶≠‡¶ø‡¶§‡¶∞‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá)
           const maxBottom = window.innerHeight - terminalPanel.offsetHeight - MAX_TOP_MARGIN;
           const minBottom = -terminalPanel.offsetHeight + 50; // ‡¶®‡¶ø‡¶ö ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶ø‡¶õ‡ßÅ‡¶ü‡¶æ ‡¶¶‡ßá‡¶ñ‡¶æ ‡¶Ø‡¶æ‡¶¨‡ßá

            if (newBottom > maxBottom) newBottom = maxBottom;
            if (newBottom < minBottom) newBottom = minBottom;

            terminalPanel.style.bottom = newBottom + 'px';
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            terminalPanel.classList.remove('grabbing');
        });

        // ‡¶ü‡¶æ‡¶ö ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü (‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø)
        terminalHeader.addEventListener('touchstart', (e) => {
            isDragging = true;
            startY = e.touches[0].clientY;
            startBottom = parseInt(getComputedStyle(terminalPanel).bottom);
        });

        document.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            let dy = startY - e.touches[0].clientY;
            let newBottom = startBottom + dy;
            
            const maxBottom = window.innerHeight - terminalPanel.offsetHeight - MAX_TOP_MARGIN;
            const minBottom = -terminalPanel.offsetHeight + 68;
            if (newBottom > maxBottom) newBottom = maxBottom;
            if (newBottom < minBottom) newBottom = minBottom;

            terminalPanel.style.bottom = newBottom + 'px';
        }, { passive: false });

        document.addEventListener('touchend', () => {
            isDragging = false;
        });
    </script>


</body>

</html>
